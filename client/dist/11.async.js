(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"3viS":function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var s=l(a("kLXV"));a("giR+");var d=l(a("fyUT"));a("5Dmo");var r=l(a("3S7+"));a("Pwec");var i=l(a("CtXQ")),o=l(a("jehZ"));a("OaEy");var n=l(a("2fM7"));a("5NDa");var m=l(a("5rEg"));a("y8nQ");var u=l(a("Vl3Y")),f=l(a("q1tI")),c=a("LLXN"),p=a("X7BR"),h=u.default.Item,k=m.default.TextArea,g=n.default.Option;class v extends f.default.Component{constructor(e){super(e),this.showModalHandler=(e=>{e&&e.stopPropagation(),this.setState({visible:!0})}),this.okHandler=(()=>{var e=this.props,t=e.onOk,a=e.form,l=e.data;a.validateFields((e,s)=>{e||(l?t(l.id,s):t(s),a.resetFields(),this.hideModalHandler())})}),this.hideModalHandler=(()=>{this.setState({visible:!1})}),this.state={visible:!1}}render(){var e=this.state.visible,t=this.props,a=t.children,l=t.form,v=t.data,E=void 0===v?{}:v,M=E.name,b=void 0===M?"":M,w=E.processor,y=void 0===w?"":w,x=E.keywords,I=void 0===x?"":x,T=E.match_method,V=void 0===T?"":T,H=E.ignore_org,_=void 0===H?"":H,C=E.ignore_repo,S=void 0===C?"":C,q=E.mail,O=void 0===q?"":q,P=E.pages,F=void 0===P?5:P,L=E.interval,X=void 0===L?60:L,z=l.getFieldDecorator,j={labelCol:{span:6},wrapperCol:{span:14}};return f.default.createElement("span",null,f.default.createElement("span",{onClick:this.showModalHandler},a),f.default.createElement(s.default,{title:E.name?(0,c.formatMessage)({id:"task.modal.edit-task"}):(0,c.formatMessage)({id:"task.modal.create-task"}),visible:e,onOk:this.okHandler,onCancel:this.hideModalHandler,style:{top:20}},f.default.createElement(u.default,{layout:"horizontal"},f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.task-name"})}),z("name",{initialValue:b,rules:[{required:!0,message:(0,c.formatMessage)({id:"task.modal.field.task-name.required"})}]})(f.default.createElement(m.default,null))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.task-processor"})}),z("processor",{initialValue:y,rules:[{required:!0}]})(f.default.createElement(n.default,null,p.processors.map((e,t)=>f.default.createElement(g,{key:"allProcessor".concat(e),value:e},e))))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.keyword"}),help:(0,c.formatMessage)({id:"task.modal.field.keyword.hint"})}),z("keywords",{initialValue:I,rules:[{required:!0}]})(f.default.createElement(k,{rows:4}))),f.default.createElement(h,(0,o.default)({},j,{label:f.default.createElement("span",null,(0,c.formatMessage)({id:"task.modal.field.match-method"}),"\xa0",f.default.createElement(r.default,{title:f.default.createElement("div",null,f.default.createElement("p",null,(0,c.formatMessage)({id:"task.modal.field.match-method.0.hint"})),f.default.createElement("p",null,(0,c.formatMessage)({id:"task.modal.field.match-method.1.hint"})),f.default.createElement("p",null,(0,c.formatMessage)({id:"task.modal.field.match-method.2.hint"})))},f.default.createElement(i.default,{type:"question-circle-o"})))}),z("match_method",{initialValue:V,rules:[{required:!0}]})(f.default.createElement(n.default,null,p.matchMethod.map((e,t)=>f.default.createElement(g,{key:"matchMethod".concat(e),value:t},(0,c.formatMessage)({id:"task.modal.field.match-method.".concat(t)})))))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.ignore-username"}),help:(0,c.formatMessage)({id:"task.modal.field.ignore-username.hint"})}),z("ignore_org",{initialValue:_})(f.default.createElement(k,{rows:3}))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.ignore-repo"}),help:(0,c.formatMessage)({id:"task.modal.field.ignore-repo.hint"})}),z("ignore_repo",{initialValue:S})(f.default.createElement(k,{rows:3}))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.email"}),help:(0,c.formatMessage)({id:"task.modal.field.email.hint"})}),z("mail",{initialValue:O})(f.default.createElement(m.default,null))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.crawl-pages"}),help:(0,c.formatMessage)({id:"task.modal.field.crawl-pages.hint"})}),z("pages",{initialValue:F})(f.default.createElement(d.default,{min:0}))),f.default.createElement(h,(0,o.default)({},j,{label:(0,c.formatMessage)({id:"task.modal.field.crawl-interval"}),help:(0,c.formatMessage)({id:"task.modal.field.crawl-interval.hint"})}),z("interval",{initialValue:X})(f.default.createElement(d.default,{min:0}))))))}}var E=u.default.create()(v);t.default=E},tZ35:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=l(a("bx4M"));a("g9YV");var d=l(a("wCAj"));a("+L6B");var r=l(a("2/Rp"));a("P2fV");var i=l(a("NJEC"));a("/zsF");var o=l(a("PArb"));a("5Dmo");var n=l(a("3S7+"));a("Awhp");var m=l(a("KrTs"));a("y8nQ");var u,f,c=l(a("Vl3Y")),p=l(a("q1tI")),h=a("MuoO"),k=l(a("wY1l")),g=a("LLXN"),v=a("X7BR"),E=l(a("3viS")),M=c.default.Item,b=(u=(0,h.connect)(e=>{var t=e.task;return{task:t}}),u(f=class extends p.default.Component{constructor(e){super(e),this.changePage=(e=>{var t=this.props.dispatch;t({type:"task/fetchTasks",payload:{page:e,pageSize:10}})}),this.createTaskHandler=(e=>{var t=this.props.dispatch;t({type:"task/createTasks",payload:e})}),this.editTaskHandler=((e,t)=>{var a=this.props.dispatch;a({type:"task/editTask",id:e,payload:t})}),this.removeTaskHandler=(e=>{var t=this.props.dispatch;t({type:"task/removeTask",id:e})}),this.columns=[{title:"id",dataIndex:"id"},{title:"processor",dataIndex:"processor"},{title:(0,g.formatMessage)({id:"task.table.columns.task-name"}),dataIndex:"name",render:(e,t)=>p.default.createElement(k.default,{to:"/list/?taskId=".concat(t.id)},e)},{title:(0,g.formatMessage)({id:"task.table.columns.keyword"}),dataIndex:"keywords"},{title:(0,g.formatMessage)({id:"task.modal.field.match-method"}),dataIndex:"match_method",render:e=>(0,g.formatMessage)({id:"task.modal.field.match-method.".concat(e)})},{title:(0,g.formatMessage)({id:"task.table.columns.crawl-pages"}),dataIndex:"pages"},{title:(0,g.formatMessage)({id:"task.table.columns.crawl-interval"}),dataIndex:"interval",render:e=>"".concat(e," ").concat((0,g.formatMessage)({id:"task.table.columns.minutes"}))},{title:(0,g.formatMessage)({id:"task.table.columns.status"}),dataIndex:"status",render:e=>{switch(v.taskStatus[e]){case"\u7b49\u5f85\u4e2d":return p.default.createElement(m.default,{status:"default",text:(0,g.formatMessage)({id:"task.status.waiting"})});case"\u8fd0\u884c\u4e2d":return p.default.createElement(m.default,{status:"processing",text:(0,g.formatMessage)({id:"task.status.running"})});default:return p.default.createElement(m.default,{status:"success",text:(0,g.formatMessage)({id:"task.status.finished"})})}}},{title:(0,g.formatMessage)({id:"task.table.columns.start-time"}),dataIndex:"start_time"},{title:(0,g.formatMessage)({id:"task.table.columns.finished-time"}),dataIndex:"finished_time"},{title:(0,g.formatMessage)({id:"task.table.columns.operation"}),key:"action",render:e=>p.default.createElement("span",null,1===e.status?p.default.createElement(n.default,{title:(0,g.formatMessage)({id:"task.operation.no-operations-hint"})},p.default.createElement("span",null,p.default.createElement(g.FormattedMessage,{id:"task.operation.no-operations"}))):p.default.createElement("div",null,p.default.createElement(E.default,{data:e,onOk:this.editTaskHandler},p.default.createElement("a",null,p.default.createElement(g.FormattedMessage,{id:"task.operation.edit"}))),p.default.createElement(o.default,{type:"vertical"}),p.default.createElement(i.default,{title:(0,g.formatMessage)({id:"task.operation.delete-hint"}),onConfirm:()=>this.removeTaskHandler(e.id)},p.default.createElement("a",null,p.default.createElement(g.FormattedMessage,{id:"task.operation.delete"})))))}]}componentWillMount(){var e=this.props.dispatch;e({type:"task/fetchTasks",payload:{page:1,pageSize:10}})}render(){var e=this.props.task;return p.default.createElement("div",null,p.default.createElement(s.default,{bordered:!1},p.default.createElement(c.default,null,p.default.createElement(M,null,p.default.createElement(E.default,{onOk:this.createTaskHandler},p.default.createElement(r.default,{type:"primary"},p.default.createElement(g.FormattedMessage,{id:"task.operation.create-task"}))))),p.default.createElement(d.default,{columns:this.columns,dataSource:e.tasks,rowKey:"id",pagination:{current:e.page,total:e.total,onChange:this.changePage}})))}})||f),w=b;t.default=w}}]);